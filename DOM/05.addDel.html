
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>添加删除记录练习</title>
<style>
  #employeeTable {
    border-spacing: 1px;
    background-color: black;
    margin: 80px auto 10px auto;
  }

  th,td {
    background-color: white;
  }

  #formDiv {
    width: 250px;
    border-style: solid;
    border-width: 1px;
    margin: 50px auto 10px auto;
    padding: 10px;
  }

  #formDiv input {
    width: 100%;
  }

  .word {
    width: 40px;
  }

  .inp {
    width: 200px;
  }
</style>
</head>

<body>
  <script type="text/javascript">
    window.onload = function () {
      var aTags = document.getElementsByTagName('a')

      for (let i=0; i<aTags.length; i++) {
        aTags[i].onclick = del
      }

      // submit 添加
      var addEmpButton = document.getElementById('addEmpButton')
      addEmpButton.onclick = function () {
        var name = document.getElementById('empName').value
        var email = document.getElementById('email').value
        var salary = document.getElementById('salary').value

        var nameTd = document.createElement('td')
        var emailTd = document.createElement('td')
        var salaryTd = document.createElement('td')
        var delA = document.createElement('a')
        var delTd = document.createElement('td')
        delA.href = 'javascript:;'
        delA.onclick = del

        var nameTxt = document.createTextNode(name)
        var emailTxt = document.createTextNode(email)
        var salaryTxt = document.createTextNode(salary)
        var delTxt = document.createTextNode('Delete')

        nameTd.appendChild(nameTxt)
        emailTd.appendChild(emailTxt)
        salaryTd.appendChild(salaryTxt)
        delA.appendChild(delTxt)
        delTd.appendChild(delA)

        var tr = document.createElement('tr')

        tr.appendChild(nameTd)
        tr.appendChild(emailTd)
        tr.appendChild(salaryTd)
        tr.appendChild(delTd)

        var employeeTable = document.getElementById('employeeTable')
        var tbody = employeeTable.getElementsByTagName('tbody')[0]
        tbody.appendChild(tr)

      }
    }


    var del = function () {
          var tr = this.parentNode.parentNode // 重难点！
          var name = tr.getElementsByTagName('td')[0].innerHTML

          var flag = confirm(`确定删除${name}吗？`)
          if (flag) {
            tr.parentNode.removeChild(tr)
          }

          return false
        }
  </script>

	<table id="employeeTable">
		<tr>
			<th>Name</th>
			<th>Email</th>
			<th>Salary</th>
			<th>&nbsp;</th>
		</tr>
		<tr>
			<td>Tom</td>
			<td>tom@tom.com</td>
			<td>5000</td>
			<td><a href="deleteEmp?id=001">Delete</a></td>
		</tr>
		<tr>
			<td>Jerry</td>
			<td>jerry@sohu.com</td>
			<td>8000</td>
			<td><a href="deleteEmp?id=002">Delete</a></td>
		</tr>
		<tr>
			<td>Bob</td>
			<td>bob@tom.com</td>
			<td>10000</td>
			<td><a href="deleteEmp?id=003">Delete</a></td>
		</tr>
	</table>

	<div id="formDiv">
	
		<h4>添加新员工</h4>

		<table>
			<tr>
				<td class="word">name: </td>
				<td class="inp">
					<input type="text" name="empName" id="empName" />
				</td>
			</tr>
			<tr>
				<td class="word">email: </td>
				<td class="inp">
					<input type="text" name="email" id="email" />
				</td>
			</tr>
			<tr>
				<td class="word">salary: </td>
				<td class="inp">
					<input type="text" name="salary" id="salary" />
				</td>
			</tr>
			<tr>
				<td colspan="2" align="center">
					<button id="addEmpButton" value="abc">
						Submit
					</button>
				</td>
			</tr>
		</table>

	</div>

</body>
</html>
